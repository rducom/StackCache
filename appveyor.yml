install:
- nuget restore
- cmd: nuget install redis-64 -excludeversion
- cmd: redis-64\redis-server.exe --service-install 
- cmd: redis-64\redis-server.exe --service-start

configuration: Debug

before_build:
- nuget restore

build:
  project: StackCache.sln
  
environment:
  COVERALLS_REPO_TOKEN:
    secure: +ChVp5vWU6SW7rp6ri8bXwXuSMiJHhdg7SwaKx2Xy4hu0ZBC7APGBgQWJDWYZMei

after_test:
- packages\OpenCover.4.6.166\tools\OpenCover.Console.exe -register:user -target:"packages\xunit.runner.console.2.0.0\tools\xunit.console.exe" -targetargs:"StackCache.Test\bin\Debug\StackCache.Test.dll" -filter:"+[Open*]* -[OpenCover.T*]*" -mergebyhash -output:opencovertests.xml -coverbytest:*.Test.dll -mergeoutput
- packages\coveralls.io.1.3.4\tools\coveralls.net.exe --opencover opencovertests.xml
